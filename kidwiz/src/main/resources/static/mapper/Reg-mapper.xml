<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kidwiz.web.DAO.RegDAO">
	<update id="accept" parameterType="String">
		UPDATE reg_consulting SET stat = '1' WHERE reg_no = #{reg_no} 
	</update>
	
	<insert id="regconInsert" parameterType="Map" keyColumn="sub_no" keyProperty="sub_no" useGeneratedKeys="true">
		INSERT INTO reg_consulting (stuNum, pro) VALUES (#{stuNum}, #{proNum}) 
	</insert>
	
	<select id="regDetail" parameterType="map" resultType="map">
		SELECT * FROM regInfoView WHERE reg_no=#{rgno}
	</select>
	
	<select id="timetable" resultType="map">
		select * from timeTest
	</select>
	
	<insert id="oneTimeRegInsert" parameterType="map">
		INSERT INTO timeTestReg (stuNum, date, time, reg_no, memo) VALUES (#{stuNum}, #{date}, #{time}, #{reg_no}, #{memo})
	</insert>
	
	<select id="regTotalCount">
		SELECT COUNT(*) FROM reg_consulting
	</select>
	
	<select id="regResult" parameterType="String">
		SELECT * FROM regInfoView WHERE regno = #{regno}
	</select>
	
	<select id="memberDetail" parameterType="String">
		SELECT * FROM members WHERE id = #{stuNum}
	</select>
	
	<insert id="resultWrite" parameterType="map">
		INSERT INTO counResult (counNum, stuNum, proNum, goal, content, summary,homework, opinion) 
		VALUES (#{regno}, #{stuNum}, 000321, #{goal}, #{content}, #{summary}, #{homework}, #{opinion})
	</insert>
	
	<select id="getRegResult" parameterType="String">
		SELECT * FROM resultView WHERE regno = #{regno}
	</select>
	
</mapper>